# 链表

链表和数组类似，是一种线性的数据结构，与数组不同的是，链表中的数据在内存中并不是顺序存储的，而是通过在链表的每个元素中，保存指向下一个元素的引用，来找到下一个元素。 这里的元素我们把它叫作节点，节点后面的节点我们把它叫作后继节点，节点前边的节点我们把它叫作前置节点。 链表的这种特性让我们无法通过索引直接访问节点，但是能够快速的删除和插入节点，因为只需要修改节点的引用。

## 分类

- 单链表，单链表是链表的最简单的形式，每个节点都指向下一个节点。
- 双向链表：双向链表在单链表的基础上，每个节点还指向上一个节点。
- 循环列表：在循环列表中，链表的尾部节点会指向头部节点，如果是双向循环列表，头部节点还会指向尾部节点。

## 常用操作

对于一个单链表，我们只需要保存头部节点的引用，就能找到所有节点，所有的操作都是围绕头部节点操作的。单链表的常见操作有：

- 查找节点，给定一个值，找到对应的节点。
- 在指定节点后面插入新节点，先找到对应位置的节点，让它指向新节点，再让新节点指向查找到的节点后面的节点。
- 在尾部添加节点，找到尾部节点，让尾部节点的下一个节点指向新节点。
- 在头部之前插入节点，让新节点的下一个节点指向原头部节点，再把头部节点引用设置为新的节点。
- 删除指定节点，先找到要删除的节点的前置节点，让它指向要删除的节点的后继节点。
- 如果删除的是头部节点，还需要把头部节点引用设置为原头部节点后面的节点
- 删除头部节点，把头部节点的引用设置为下一个节点。
- 删除尾部节点，找到尾部节点之前的节点，把它的指向设置为空。
- 遍历链表：从头到尾访问链表中的每一个节点。

## JavaScript 实现

基于链表数据结构的特点，我们可以使用一个类来表示一个节点，这里的 Node class 包含两个属性：

- value 节点的数据。
- next 对下一个节点的引用。

这里的 next 的值也是一个 Node 对象，所以这是一个递归的结构。

```js
class Node {
  constructor(value, next = null) {
    this.value = value;
    this.next = next;
  }
}
```

定义链表

```js
class LinkedList {
  constructor(value) {
    this.head = new Node(value);
  }
}
```

因为 Node 是递归的结构，对于单链表，我们只需要知道头节点的引用就可以了，所有的节点查找、插入和删除都需要通过头节点来操作，在新建一个链表时，我们通过构造函数接收头节点的值，创建一个 Node 对象，然后保存在 head 属性中，head 就是头部节点的引用。

### 查找节点

接下来定义查找节点的代码，findNode() ，方法接收要查找的值作为参数，返回查找到的节点，如果没找到则返回 null：

```js
findNode(value) {
    let currentNode = this.head;
    while (currentNode && currentNode.value !== value) {
      currentNode = currentNode.next;
    }
    if (!currentNode) {
      return null;
    }
    return currentNode;
  }
```

### 在指定位置插入节点

下面是在指定位置插入节点的方法，insertAfter()，这个方法接收两个参数，第一个指定在哪个节点的后面插入，这里接收节点的值，第二参数是新节点的值：

```js
insertAfter(value, newValue) {
    const newNode = new Node(newValue);
    const currentNode = this.findNode(value);
    if (!currentNode) {
      return "没有该节点";
    }
    newNode.next = currentNode.next;
    currentNode.next = newNode;
  }
```

### 在尾部追加节点

再来看在链表的尾部追加节点的方法，append()，这个方法接收一个 value 作为参数，指定新节点的值：

```js
append(value) {
  const newNode = new Node(value);
  let currentNode = this.head;
  while (currentNode.next) {
    currentNode = currentNode.next;
  }
  currentNode.next = newNode;
}
```

### 在头部追加节点

再定义从头部插入节点的方法，prepend()，它也接收一个值作为参数，代表新节点的值：

```js
prepend(value) {
  const newNode = new Node(value);
  newNode.next = this.head;
  this.head = newNode;
}
```

### 删除指定节点

我们来看删除指定节点的方法，remove()，它接收一个 value 参数，即要删除的节点值：

```js
remove(value) {
  let currentNode = this.head;
  let previousNode = null;

  while (currentNode && currentNode.value !== value) {
    previousNode = currentNode;
    currentNode = currentNode.next;
  }

  if (!currentNode) return '没有该节点'

  if (currentNode === this.head) {
    this.head = currentNode.next;
  } else {
    previousNode.next = currentNode.next;
  }
}
```

### 删除头部节点

```js
removeHead() {
  this.head ?? this.head = this.head.next
}
```

### 删除尾部节点

```js
removeTail() {
  let currentNode = this.head;
  let previousNode = null;
  while (currentNode.next) {
    previousNode = currentNode;
    currentNode = currentNode.next;
  }
  previousNode.next = null;
}
```

### 遍历链表

遍历链表的代码和查找节点的几乎一样，在这个 traverse() 方法中，利用 while 循环直接打印出遍历到的节点的值，这样就完成了遍历：

```js
traverse() {
  let currentNode = this.head;
  while (currentNode) {
    console.log(currentNode.value);
    currentNode = currentNode.next;
  }
}
```
